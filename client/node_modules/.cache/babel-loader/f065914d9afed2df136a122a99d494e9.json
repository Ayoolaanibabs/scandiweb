{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ayoolaanibaba/Desktop/scandiweb_test/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ayoolaanibaba/Desktop/scandiweb_test/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import productService from'./productService';var initialState={products:[],isError:false,isSuccess:false,isLoading:false,message:'',status:null};// Get all product\nexport var getAllProduct=createAsyncThunk('product/getAll',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_,thunkAPI){var response,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return productService.getAllProduct();case 3:response=_context.sent;return _context.abrupt(\"return\",response);case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);message=_context.t0.response&&_context.t0.response.data&&_context.t0.response.data.message||_context.t0.message||_context.t0.toString();return _context.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());// Create new product\nexport var createProduct=createAsyncThunk('product/create',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(productData,thunkAPI){var response,message;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return productService.createProduct(productData);case 3:response=_context2.sent;return _context2.abrupt(\"return\",response);case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);message=_context2.t0.response&&_context2.t0.response.data&&_context2.t0.response.data.message||_context2.t0.message||_context2.t0.toString();return _context2.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());// Mass Delete product\nexport var deleteProduct=createAsyncThunk('product/delete',/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(productList,thunkAPI){var response,message;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return productService.deleteProduct(productList);case 3:response=_context3.sent;return _context3.abrupt(\"return\",response);case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);message=_context3.t0.response&&_context3.t0.response.data&&_context3.t0.response.data.message||_context3.t0.message||_context3.t0.toString();return _context3.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}());export var productSlice=createSlice({name:'product',initialState:initialState,reducers:{reset:function reset(state){state=initialState;},setStatus:function setStatus(state){state.status=null;}},extraReducers:function extraReducers(builder){builder.addCase(getAllProduct.pending,function(state){state.isLoading=true;}).addCase(getAllProduct.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.products=action.payload;}).addCase(getAllProduct.rejected,function(state,action){state.isLoading=false;state.isError=true;}).addCase(createProduct.pending,function(state){state.isLoading=true;}).addCase(createProduct.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.status=action.payload;// state.products.push(action.payload);\n}).addCase(createProduct.rejected,function(state){state.isLoading=false;state.isError=true;}).addCase(deleteProduct.pending,function(state){state.isLoading=true;}).addCase(deleteProduct.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.products=state.products.filter(function(array_el){return action.meta.arg.filter(function(anotherOne_el){return anotherOne_el===array_el.id;}).length===0;});console.log(state.products);}).addCase(deleteProduct.rejected,function(state){state.isLoading=false;state.isError=true;});}});var _productSlice$actions=productSlice.actions,reset=_productSlice$actions.reset,setStatus=_productSlice$actions.setStatus;export{reset,setStatus};export default productSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","productService","initialState","products","isError","isSuccess","isLoading","message","status","getAllProduct","_","thunkAPI","response","data","toString","rejectWithValue","createProduct","productData","deleteProduct","productList","productSlice","name","reducers","reset","state","setStatus","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","filter","array_el","meta","arg","anotherOne_el","id","length","console","log","actions","reducer"],"sources":["/Users/ayoolaanibaba/Desktop/scandiweb_test/client/src/features/product/productSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport productService from './productService';\n\nconst initialState = {\n  products: [],\n  isError: false,\n  isSuccess: false,\n  isLoading: false,\n  message: '',\n  status: null,\n};\n\n// Get all product\nexport const getAllProduct = createAsyncThunk(\n  'product/getAll',\n  async (_, thunkAPI) => {\n    try {\n      const response = await productService.getAllProduct();\n      return response;\n    } catch (error) {\n      const message =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString();\n      return thunkAPI.rejectWithValue(message);\n    }\n  }\n);\n\n// Create new product\nexport const createProduct = createAsyncThunk(\n  'product/create',\n  async (productData, thunkAPI) => {\n    try {\n      const response = await productService.createProduct(productData);\n      return response;\n    } catch (error) {\n      const message =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString();\n      return thunkAPI.rejectWithValue(message);\n    }\n  }\n);\n\n// Mass Delete product\nexport const deleteProduct = createAsyncThunk(\n  'product/delete',\n  async (productList, thunkAPI) => {\n    try {\n      const response = await productService.deleteProduct(productList);\n      return response;\n    } catch (error) {\n      const message =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString();\n      return thunkAPI.rejectWithValue(message);\n    }\n  }\n);\n\nexport const productSlice = createSlice({\n  name: 'product',\n  initialState,\n  reducers: {\n    reset: (state) => {\n      state = initialState;\n    },\n    setStatus: (state) => {\n      state.status = null\n    }\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(getAllProduct.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(getAllProduct.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = true;\n        state.products = action.payload;\n      })\n      .addCase(getAllProduct.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isError = true;\n      })\n      .addCase(createProduct.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(createProduct.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = true;\n        state.status = action.payload;\n        // state.products.push(action.payload);\n      })\n      .addCase(createProduct.rejected, (state) => {\n        state.isLoading = false;\n        state.isError = true;\n      })\n      .addCase(deleteProduct.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(deleteProduct.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = true;\n        state.products = state.products.filter(function (array_el) {\n          return (\n            action.meta.arg.filter(function (anotherOne_el) {\n              return anotherOne_el === array_el.id;\n            }).length === 0\n          );\n        });\n        console.log(state.products);\n      })\n      .addCase(deleteProduct.rejected, (state) => {\n        state.isLoading = false;\n        state.isError = true;\n      });\n  },\n});\n\nexport const { reset, setStatus } = productSlice.actions;\nexport default productSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}